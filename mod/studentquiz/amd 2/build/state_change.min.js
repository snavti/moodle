define ("mod_studentquiz/state_change",["jquery","core/ajax","core/notification"],function(a,b,c){var d={SELECTOR:{STATE_SELECT:"#menustatetype",CHANGE_STATE_BUTTON:"div.singlebutton.continue_state_change [type=submit]",STATE_VALUE_INPUT:"input[name=state]",SUBMIT_STATE_BUTTON:"#change_state",CHANGE_STATE_NOTIFICATION:"span.change-question-state"},init:function init(){var e=a(d.SELECTOR.STATE_SELECT).val();a(document).on("change",d.SELECTOR.STATE_SELECT,{},function(){var b=a(d.SELECTOR.STATE_SELECT),c=a(d.SELECTOR.CHANGE_STATE_BUTTON),f=a(d.SELECTOR.STATE_VALUE_INPUT),g=a(d.SELECTOR.SUBMIT_STATE_BUTTON);if(""!==b.val()&&b.val()!==e){f.val(b.val());c.removeAttr("disabled");g.removeAttr("disabled")}else{c.attr("disabled","disabled");g.attr("disabled","disabled")}});a(document).on("click",d.SELECTOR.SUBMIT_STATE_BUTTON,{},function(){var f=a(d.SELECTOR.STATE_SELECT),g=a(d.SELECTOR.SUBMIT_STATE_BUTTON);g.attr("disabled","disabled");var h=d.addPendingJSPromise("studentquizStateChange");require(["core/loadingicon"],function(b){var c=a(d.SELECTOR.CHANGE_STATE_NOTIFICATION);b.addIconToContainerRemoveOnCompletion(c,h)});var i={courseid:g.attr("data-courseid"),cmid:g.attr("data-cmid"),questionid:g.attr("data-questionid"),state:f.val()},j,k=b.call([{methodname:"mod_studentquiz_set_state",args:i}],!0,!0);k[0].then(function(a){c.alert(a.status,a.message);h.resolve();e=f.val();window.opener.location.reload()}).fail(j)})},addPendingJSPromise:function addPendingJSPromise(b){M.util.js_pending(b);var d=a.Deferred();d.then(function(){M.util.js_complete(b);return arguments[0]}).catch(c.exception);return d}};return d});
//# sourceMappingURL=state_change.min.js.map
