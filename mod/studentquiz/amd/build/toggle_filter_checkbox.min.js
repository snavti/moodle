define(["jquery","core/key_codes"],function(a,b){var c={SELECTOR:{TIME_EDT:{CALENDAR:"a[name='timecreated_edt[calendar]",SELECT_DAY_CALENDAR:"select[name='timecreated_edt[day]",INPUT:"input[name='timecreated_edt[enabled]']"},TIME_SDT:{CALENDAR:"a[name='timecreated_sdt[calendar]",SELECT_DAY_CALENDAR:"select[name='timecreated_sdt[day]",INPUT:"input[name='timecreated_sdt[enabled]']"}},dependencies:[],init:function(){var d=a("a.link-toggle");d.each(function(b,d){var e=a(d),f=e.data("disableelements"),g=f.split(",");for(b in g){var h="id_"+g[b];void 0===c.dependencies[h]&&(c.dependencies[h]=[]),c.dependencies[h].push(a("#"+e.attr("for")))}}),d.click(function(b){b.preventDefault(),c.linkToggleHandler(a(this))}).keypress(function(d){d.keyCode===b.space&&(d.preventDefault(),c.linkToggleHandler(a(this)))}),c.initCalendarTabIndex()},linkToggleHandler:function(b){var d=a(".toggle#"+b.attr("for")),e=!d.prop("checked");d.prop("checked",e);var f=b.data("disableelements");if(f.length>0){var g,h=f.split(",");for(g in h){var i="id_"+h[g];!e&&c.checkDependOn(i)&&(e=!0),a("#"+i).attr("disabled",e)}}},checkDependOn:function(a){var b,d=c.dependencies[a];for(b in d)if(d[b].prop("checked"))return!0;return!1},initCalendarTabIndex:function(){a(c.SELECTOR.TIME_SDT.INPUT).change(function(){var b=a(c.SELECTOR.TIME_SDT.CALENDAR),d=a(c.SELECTOR.TIME_SDT.SELECT_DAY_CALENDAR),e=a(this).is(":checked");c.toggleCalendarTabIndex(b,d,e)}),a(c.SELECTOR.TIME_EDT.INPUT).change(function(){var b=a(c.SELECTOR.TIME_EDT.CALENDAR),d=a(c.SELECTOR.TIME_EDT.SELECT_DAY_CALENDAR),e=a(this).is(":checked");c.toggleCalendarTabIndex(b,d,e)})},toggleCalendarTabIndex:function(a,b,c){c?(a.removeAttr("tabindex"),b.focus()):a.attr("tabindex",-1)}};return c});